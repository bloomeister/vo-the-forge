#include "Global.srt.h"

STRUCT(VSOutput)
{
	DATA(float4, pos, SV_Position);
	DATA(float3, color, COLOR0);
	DATA(float2, uv, TEXCOORD0);
};

float4 PS_MAIN( VSOutput In )
{
	INIT_MAIN;
	float4 Out;
    float4 diffuse = SampleTex2D(uTexture0, uSampler0, In.uv);
    float lum = dot(diffuse.rgb, f3(0.333));
    diffuse.rgb = lerp(diffuse.rgb, f3(lum), 0.8);
    diffuse.rgb *= In.color.rgb;
    Out = diffuse;
	RETURN(Out);
}
